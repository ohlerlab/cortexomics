# for each data subset we do an analysis
# and then for each contrast within that we do an analysis
# we should be able to specify most things at whatever level we want
# so for instance we can specify the model and then a bunch of contrasts within it
parameters:
  # this gtf should be the same as the one used for featurecounts
  annotation_gtf: 'pipeline/my_gencode.vM12.annotation.gtf'
  # "group" column in sample_parameter.csv is split into these columns
  # mcols: ['treatment','assay']
  mcols:  ['time','assay']
  # root directory for analysis
  root: '/fast/work/groups/ag_ohler/dharnet_m/cortexomics/pipeline/run_rseq'
  # where all the rmd's are
  rmdfold: '/fast/work/groups/ag_ohler/dharnet_m/senescence_ribo/Applications/rseq/inst/rmd/de/'
  # where rseq is
  rseq_path: '/fast/work/groups/ag_ohler/dharnet_m/senescence_ribo/Applications/rseq/'
  # where the RNA-seq pipeline output is
  pipeline_results_path: '/fast/work/groups/ag_ohler/dharnet_m/cortexomics/pipeline/'
  sample_param_file: '/fast/work/groups/ag_ohler/dharnet_m/cortexomics/src/sample_parameter.csv'

  # thresholding significant changes
  ## used in ma-plot and creating table, and for determining de genes for GO/KEGG
  my_alpha: 0.05
  ## used for creatqqing table and for determining de genes for GO/KEGG enrichment
  ## upregulated: log2fc > my_log2fc_th
  ## downregulated: log2fc < - my_log2fc_th
  my_log2fc_th: 0.32

  # dual scale settings for heatmaps and MA plots
  ## setting values outside of the range [z_min, z_max] to the limiting values
  z_max:  6
  z_min: -6

  # set to FALSE to suppress GO term analysis
  do_GO: TRUE
  # use the appropriate bioconductor OrgEgDb
  # my_org_eg_db: "org.Mm.eg
  # also used to select the entrez ensembl map
  my_org_eg_db: "org.Mm.eg" 

  # KEGG enrichment (set to FALSE to suppress KEGG analysis)
  do_KEGG: TRUE
  ## organism id
  # kegg_org: "mmu"
  kegg_org: "mmu"
  kegg_p_value_cutoff: 0.05
  kegg_q_value_cutoff: 0.2
  kegg_min_gs_size: 5
  kegg_max_gs_size: 500
  kegg_p_adj_meth: "BH"

  # if genes of interest are specified in a file called "genes_of_interest.txt" then we can plot their expression

  do_GOI: FALSE

  do_gage: FALSE
  # here we can add custom gene sets to test for enrichment (in gmt format, as from MSigDB)
  do_diagnostics: FALSE
  
  custom_gene_sets:
    # IRES:  '/fast/work/groups/ag_ohler/dharnet_m/senescence_ribo/ext_data/ires_genes_ensemblids.tsv'
  custom_q_value_cutoff: 0.05
  custom_log2fc_th: .5

  useBetaPrior: TRUE
  
  testrunonly: FALSE 
  ignoresamplepattern: 'test' 
 
factor_levels:
  time:
  - E13
  - E145
  - E16
  - E175
  - P0
  assay:
  - total
  - ribo
#  define subsets by selecting specific factor levels
subsets:
  All:
    sample_spec: ".*"
    models: 
      Xtail_TE_change:
        modelstring: "~ assay "
        parameters:
          do_diagnostics: FALSE
          alt_res_file: TRUE
        contrasts:
           'Change in TE between E13 and E145':
            contrast_spec:  'pipeline/xtail/xtail_E145.txt'
           'Change in TE between E13 and E16':
            contrast_spec:  'pipeline/xtail/xtail_E16.txt'
           'Change in TE between E13 and E175':
            contrast_spec:  'pipeline/xtail/xtail_E175.txt'
           'Change in TE between E13 and P0':
            contrast_spec:  'pipeline/xtail/xtail_P0.txt'
        
      #example of a numeric covariate
      # dosage:
      #   modelstring: "~ dosage"
      #   contrasts:
      #     interaction_hom_cardio:
      #       contrast_spec:       
      #         # [0,1]
      #         "dosage"

      #example of an interaction term - test first with groupinteraction=FALSE and useBetaPrior=FALSE
      #to figure out the appropriate name for the contrast spec, then switch to get shrinkage
      #genotype_celltype_interaction:
      #  parameters:
      #    groupinteraction: TRUE
      #    betaPrior: FALSE
      #  modelstring: "~ genotype + celltype + genotype:celltype"
      #  contrasts:
      #    interaction_hom_cardio:
      #      contrast_spec: "genotypehom.celltypecardiom" # by running with betaprior=FALSE you can figure out the name of this term
      # #note this gives identical output to the above contrast
      # genocell_manual_groups:
      #   modelstring: "~group"
      #   contrasts:
      #     'interaction hom':
      #       contrast_spec: [0,1,-1,0,0,-1,1]

      # #we currently can't do interactions with numeric covariates and shrinkage, these need to
      # #be done with betaPrior = FALSE 
      # dosagecell_manual_groups:
      #   modelstring: "~dosage + celltype + dosage:celltype"
      #   parameters:
      #       useBetaPrior: FALSE
      #   contrasts:
      #     'interaction':
      #       contrast_spec: dosage.celltypecardiom
 
